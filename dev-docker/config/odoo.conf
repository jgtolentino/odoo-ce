[options]
; =============================================================================
; ODOO 18 CE CONFIGURATION FILE - Production Ready
; =============================================================================
; This configuration file is mounted into the container at /etc/odoo/odoo.conf
; It controls how the Odoo server behaves during the "Activation" phase.
; =============================================================================

; -----------------------------------------------------------------------------
; DATABASE CONNECTION
; -----------------------------------------------------------------------------
; These settings tell Odoo how to connect to the PostgreSQL container.
; The 'db' hostname resolves to the postgres container via Docker networking.
db_host = db
db_port = 5432
db_user = odoo
db_password = secure_db_password_123
db_name = False
db_template = template0
db_maxconn = 64

; Filter which databases are visible in the database manager.
; Set to a regex pattern or leave empty to show all.
; Example: dbfilter = ^mycompany_.*$
dbfilter =

; -----------------------------------------------------------------------------
; ADMIN & SECURITY
; -----------------------------------------------------------------------------
; This is the password that allows you to create/delete databases.
; CRITICAL: CHANGE THIS immediately for production!
admin_passwd = $pbkdf2-sha512$25000$CHANGE_THIS_SUPER_SECRET_PASSWORD

; List database management (True = enabled, False = disabled for security)
list_db = True

; -----------------------------------------------------------------------------
; ADDONS PATH
; -----------------------------------------------------------------------------
; CRITICAL: This must match the paths we created in the Dockerfile.
; Order matters: Custom > OCA > Core (first match wins).
addons_path = /mnt/extra-addons/custom,/mnt/extra-addons/oca/reporting-engine,/mnt/extra-addons/oca/account-financial-reporting,/mnt/extra-addons/oca/project,/mnt/extra-addons/oca/web,/mnt/extra-addons/oca/server-tools,/usr/lib/python3/dist-packages/odoo/addons

; Path to store Odoo data (filestore, sessions, etc.)
data_dir = /var/lib/odoo

; -----------------------------------------------------------------------------
; SERVER CONFIGURATION
; -----------------------------------------------------------------------------
; HTTP interface binding
http_interface = 0.0.0.0
http_port = 8069
longpolling_port = 8072

; Proxy mode - Enable if behind Nginx/Traefik reverse proxy
; When True, Odoo trusts X-Forwarded-* headers
proxy_mode = False

; -----------------------------------------------------------------------------
; PERFORMANCE TUNING
; -----------------------------------------------------------------------------
; workers = 0 means "Threaded Mode" (development/small deployments)
; For production with 2+ CPU cores, use: workers = (2 * CPU_cores) + 1
; Example: 4 core server = 9 workers
workers = 0

; Memory limits per worker (in bytes) - Uncomment for production
; limit_memory_hard = 2684354560
; limit_memory_soft = 2147483648

; CPU time limits per worker (in seconds) - Uncomment for production
; limit_time_cpu = 60
; limit_time_real = 120
; limit_time_real_cron = 0

; Request processing limits
; limit_request = 8192

; Maximum number of cron threads (0 = no cron workers in multi-process)
max_cron_threads = 2

; -----------------------------------------------------------------------------
; LOGGING
; -----------------------------------------------------------------------------
; Log file path (inside the container)
logfile = /var/log/odoo/odoo.log

; Log level: info, debug, debug_rpc, debug_sql, debug_rpc_answer, warn, error, critical
log_level = info

; Rotate log files
logrotate = True

; Log handlers for specific modules (comma-separated)
; Format: module:LEVEL (e.g., werkzeug:WARNING to reduce noise)
log_handler = :INFO,werkzeug:WARNING,odoo.sql_db:WARNING

; Syslog settings (uncomment for centralized logging)
; syslog = False
; log_db = False
; log_db_level = warning

; -----------------------------------------------------------------------------
; EMAIL / SMTP (Configure for production)
; -----------------------------------------------------------------------------
; smtp_server = smtp.gmail.com
; smtp_port = 587
; smtp_ssl = False
; smtp_ssl_certificate_filename = False
; smtp_ssl_private_key_filename = False
; smtp_user = your-email@gmail.com
; smtp_password = your-app-password
; email_from = noreply@yourdomain.com

; -----------------------------------------------------------------------------
; SECURITY
; -----------------------------------------------------------------------------
; Disable demo data loading (recommended for production)
without_demo = all

; Server-wide modules to load
server_wide_modules = base,web

; Session cookie settings
; session_redis = False
; session_redis_host = localhost
; session_redis_port = 6379

; -----------------------------------------------------------------------------
; DEVELOPMENT OPTIONS (Disable in production!)
; -----------------------------------------------------------------------------
; Auto-reload on file changes (development only)
; dev_mode = reload,qweb,werkzeug,xml

; Enable test mode
; test_enable = False
; test_file =
; test_tags =

; -----------------------------------------------------------------------------
; REPORTS & PRINTING
; -----------------------------------------------------------------------------
; Report URL (wkhtmltopdf)
; report_url = http://localhost:8069

; -----------------------------------------------------------------------------
; MULTI-COMPANY / MULTI-DATABASE
; -----------------------------------------------------------------------------
; Unaccent extension for better search (requires PostgreSQL unaccent)
unaccent = True

; Limit the number of databases per user
; db_maxconn_gevent = False

; -----------------------------------------------------------------------------
; GEOIP (Optional - for visitor tracking)
; -----------------------------------------------------------------------------
; geoip_database = /usr/share/GeoIP/GeoLite2-City.mmdb
